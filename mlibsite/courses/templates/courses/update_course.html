{% extends 'base.html' %}
{% block content %}
<form class="form-group" method="post" enctype="multipart/form-data">
  {{form.hidden_tag()}}
  <br>
  <div class="jumbotron" align="center">

    <div class="container">
      <div class="row">
        <div class="col-sm" align='left'>
          <img align='center' src="{{label_image}}">
          <br><br>
          <div class="form-group" align='left'>
            {{form.label_image.label(class='form-group')}}
            {{form.label_image(class='form-control-file')}}
          </div>
        </div>
        <div class="col-lg">
          <h2>Редактирование курса занятий</h2>
          <h5><a class="text-body text-decoration-none" href="{{url_for('projects.project_view', project_id=project.id)}}">{{project_name}}</a></h5>
          <h5><a class="text-body text-decoration-none" href="{{url_for('projects.term_view', term_id=term.id)}}">{{term_name}}</a></h5>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="form-group">
      {{form.name.label(class='form-control-label')}}
      {{form.name(class='form-control form-control')}}
    </div>
    <div class="form-group">
      {{form.description.label(class='form-control-label')}}
      {{form.description(class='form-control form-control', rows="5")}}
    </div>
    <table width='100%'>
      <tr>
        <td width='50%'>
          <div class="form-group">
            {{form.start_date.label(class='form-control-label')}}
            {{form.start_date(class='form-control form-control')}}
          </div>
        </td>
        <td>
          <div class="form-group">
            {{form.finish_date.label(class='form-control-label')}}
            {{form.finish_date(class='form-control form-control')}}
          </div>
        </td>
      </tr>
    </table>
    <div class="form-group">
      {{form.contacts_info.label(class='form-control-label')}}
      {{form.contacts_info(class='form-control form-control')}}
    </div>
    <div class="form-group">
      {{form.address.label(class='form-control-label')}}
      {{form.address(class='form-control form-control')}}
    </div>
    <div class="form-group">
      {{form.tutors.label(class='form-control-label')}}
      {{form.tutors(class='form-control form-control')}}
    </div>
    <div class="form-group">
      {{form.web_links.label(class='form-control-label')}}
      {{form.web_links(class='form-control form-control')}}
    </div>
    <div class="form-group">
      {{form.note.label(class='form-control-label')}}
      {{form.note(class='form-control form-control')}}
    </div>
    <!-- Блок работы с прикрепленными файлами -->
    {% if attachments %}
      <!-- Прикрепленные файлы: -->
      <table class="table table-sm">
        <tr class="table-info">
          <th scope="col">Прикрепленные файлы:</th>
          <th></th>
        </tr>
        {% for attachment in attachments %}
          <tr>
            <td> {{attachment}}</td>
            <td align='center'> <a class='btn btn-outline-success btn-sm' href="{{url_for('courses.download_attachment', course_id=course.id, attachment=attachment)}}">Скачать</a>
            <a class='btn btn-outline-danger btn-sm' href="{{url_for('courses.delete_attachment', course_id=course.id, attachment=attachment)}}">Удалить</a></td>
          </tr>
        {% endfor %}
      </table>
      <div class="form-group">
        Для добавления еще одного файла (pdf, pptx, docx, txt)
        {{form.attach(class='form-control-file')}}
      </div>
    {% else %}
    <div class="form-group">
      {{form.attach.label(class='form-control-label')}}
      {{form.attach(class='form-control-file')}}
    </div>
    {% endif %}
    <div class="form-group" align='right'>
      {{form.submit(class='btn btn-outline-info')}}
    </div>
  </div>
</form>
{% endblock %}
